<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N8N Troubleshooting Guide</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .error-type { background: #f8f9fa; border-left: 4px solid #dc3545; padding: 15px; margin: 15px 0; }
        .solution { background: #d4edda; border-left: 4px solid #28a745; padding: 15px; margin: 15px 0; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 15px 0; }
        code { background: #f1f1f1; padding: 2px 5px; border-radius: 3px; }
        .test-button { background: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>N8N Webhook Troubleshooting</h1>
    
    <div class="error-type">
        <h3>üö® Current Issue: Telegram Webhook Failed</h3>
        <p><strong>Error:</strong> "Failed to resolve host: Name or service not known"</p>
        <p><strong>Meaning:</strong> Telegram can't reach your n8n instance to deliver messages</p>
    </div>

    <div class="solution">
        <h3>‚úÖ Quick Fix Steps</h3>
        <ol>
            <li><strong>Check your webhook URL</strong> - Should be <code>https://asfga.app.n8n.cloud/webhook/...</code></li>
            <li><strong>Test n8n connectivity</strong> - Click button below to test</li>
            <li><strong>Regenerate webhook</strong> - Delete and recreate Telegram Trigger node</li>
            <li><strong>Verify Telegram bot token</strong> - Make sure it's valid and active</li>
        </ol>
        
        <button class="test-button" onclick="testN8NConnection()">Test N8N Connection</button>
        <div id="connection-result"></div>
    </div>

    <div class="warning">
        <h3>‚ö†Ô∏è Other Nodes That May Have Similar Issues</h3>
        <ul>
            <li><strong>High Risk:</strong> Webhook triggers, HTTP Request nodes, Slack nodes</li>
            <li><strong>Medium Risk:</strong> Google services, Airtable, external databases</li>
            <li><strong>Low Risk:</strong> Code nodes, Set nodes, IF nodes (internal only)</li>
        </ul>
    </div>

    <h3>üîß Common Webhook Problems & Solutions</h3>
    
    <h4>Problem 1: Wrong Webhook URL</h4>
    <p><strong>Check:</strong> Make sure webhook isn't pointing to localhost or internal IP</p>
    <p><strong>Fix:</strong> Use your public n8n cloud URL: <code>https://asfga.app.n8n.cloud/</code></p>

    <h4>Problem 2: SSL Certificate Issues</h4>
    <p><strong>Check:</strong> Visit your n8n URL in browser - should show valid HTTPS</p>
    <p><strong>Fix:</strong> Contact n8n cloud support if SSL is broken</p>

    <h4>Problem 3: Firewall/Network Blocking</h4>
    <p><strong>Check:</strong> Test webhook URL from external service</p>
    <p><strong>Fix:</strong> Check n8n cloud network settings</p>

    <h3>üìä Impact Assessment</h3>
    <p><strong>Severity:</strong> Medium - Prevents webhook-based automations</p>
    <p><strong>Scope:</strong> Only affects external webhook triggers</p>
    <p><strong>Workaround:</strong> Use polling-based triggers instead of webhooks</p>

    <script>
        async function testN8NConnection() {
            const resultDiv = document.getElementById('connection-result');
            resultDiv.innerHTML = '<p>Testing connection...</p>';
            
            try {
                const response = await fetch('https://asfga.app.n8n.cloud/', {
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                
                resultDiv.innerHTML = '<p style="color: green;">‚úÖ N8N instance is reachable. Issue is likely with specific webhook configuration.</p>';
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">‚ùå Cannot reach N8N instance. This is a connectivity issue.</p>';
            }
        }
    </script>
</body>
</html>